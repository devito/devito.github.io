<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo - just script tags</title>
</head>
<body>
    <h1>This is a demo for loading resources first with script then with module</h1>
    <p>Look in console</p>
    <p>Flow is the following:</p>
    <ul>
        <li>add iife_script as module script tag <code>script src="/script/iife_script.js" </code></li>
        <li>script has a global function with a global counter that increments per load</li>
        <li>call function with regular inline script tag</li>
        <li>call function with defer inline script tag</li>
        <li>call function with module inline script tag</li>
        <li>load iife_script again with <code>script type="module" src="/script/iife_script.js"</code></li>
        <li>call function with module inline script tag one last time</li>
        <li>expect one load only on the page</li>
    </ul>
    <script src="/script/iife_script.js" ></script>
    <script>
        console.log("first call to global");
        window.globalFunction();
    </script>
    <script src="/script/iife_script.js" ></script>
    <script defer>
        console.log("second call to global");
        window.globalFunction();
    </script>
    <script type="module">
        console.log("thrid call to global");
        window.globalFunction();
    </script>
    <script type="module" src="/script/iife_script.js" ></script>
    <script type="module">
        console.log("fourth call to global");
        window.globalFunction();
    </script>
    <script type="module" src="/script/iife_script.js" ></script>
    <script type="module">
        console.log("Fifth call to global");
        window.globalFunction();
    </script>
</body>
</html>